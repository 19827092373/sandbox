/* ===========================================
   学情诊断系统 Pro - Design System v4
   明暗双模式主题系统
   =========================================== */

/* Google Fonts: Tech Startup Pairing */
@import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===========================================
   CSS Variables - Refined Light Mode
   =========================================== */
@layer base {
  :root {
    /* Primary - Indigo */
    --primary: 239 84% 67%;
    --primary-foreground: 0 0% 100%;

    /* Background - Premium White/Slate */
    --background: 210 40% 98%;
    --foreground: 222 47% 11%;

    /* Card */
    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;

    /* Popover */
    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;

    /* Secondary */
    --secondary: 210 40% 96%;
    --secondary-foreground: 222 47% 11%;

    /* Muted */
    --muted: 210 40% 96%;
    --muted-foreground: 215 16% 47%;

    /* Accent */
    --accent: 210 40% 96%;
    --accent-foreground: 222 47% 11%;

    /* Destructive */
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    /* Border */
    --border: 214 32% 91%;
    --input: 214 32% 91%;
    --ring: 239 84% 67%;

    /* Radius */
    --radius: 1rem;

    /* Special: Glass effect refinement */
    --glass-bg: rgba(255, 255, 255, 0.85);
    --glass-border: rgba(226, 232, 240, 0.6);
    --glass-shadow: rgba(148, 163, 184, 0.08);
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
    background:
      radial-gradient(ellipse 80% 50% at 50% -20%, rgba(79, 70, 229, 0.08), transparent),
      radial-gradient(ellipse 60% 40% at 100% 0%, rgba(129, 140, 248, 0.05), transparent),
      radial-gradient(ellipse 60% 40% at 0% 100%, rgba(249, 115, 22, 0.03), transparent),
      #F8FAFC;
    background-attachment: fixed;
  }

  /* Headings use Space Grotesk */
  h1, h2, h3, h4, h5, h6 {
    font-family: 'Space Grotesk', sans-serif;
    font-weight: 600;
    letter-spacing: -0.025em;
  }
}

/* ===========================================
   Glass Morphism Components
   =========================================== */
@layer components {
  .glass-panel {
    background: linear-gradient(
      165deg,
      rgba(255, 255, 255, 0.92) 0%,
      rgba(248, 250, 252, 0.96) 100%
    );
    backdrop-filter: blur(24px) saturate(160%);
    -webkit-backdrop-filter: blur(24px) saturate(160%);
    border: 1px solid rgba(226, 232, 240, 0.6);
    box-shadow:
      0 12px 40px rgba(148, 163, 184, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.9);
  }

  .glass-card {
    @apply bg-white/85 backdrop-blur-md border border-slate-200/50;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .glass-card:hover {
    @apply bg-white border-slate-300/60 -translate-y-1;
    box-shadow: 0 16px 48px rgba(148, 163, 184, 0.12);
  }

  /* Card Elevated */
  .card-elevated {
    border-radius: 24px;
    transition: all 0.4s ease;
    background: linear-gradient(
      165deg,
      rgba(255, 255, 255, 0.96) 0%,
      rgba(248, 250, 252, 0.98) 100%
    );
    border: 1px solid rgba(226, 232, 240, 0.6);
    box-shadow:
      0 24px 64px rgba(148, 163, 184, 0.12),
      inset 0 1px 0 rgba(255, 255, 255, 1);
  }
}

/* ===========================================
   Custom Scrollbar
   =========================================== */
.custom-scrollbar::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: rgba(148, 163, 184, 0.25);
  border-radius: 100px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: rgba(148, 163, 184, 0.4);
}

/* Firefox */
.custom-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: rgba(148, 163, 184, 0.25) transparent;
}

/* ===========================================
   Animations - Enhanced for smoother experience
   =========================================== */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.96);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

@keyframes pulse-subtle {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

@keyframes glowPulse {
  0%, 100% {
    box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
  }
  50% {
    box-shadow: 0 0 30px rgba(99, 102, 241, 0.5);
  }
}

@layer utilities {
  .animate-fade-in {
    animation: fadeIn 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  .animate-slide-up {
    animation: slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  .animate-scale-in {
    animation: scaleIn 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  .animate-shimmer {
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.08) 50%,
      transparent 100%
    );
    background-size: 200% 100%;
    animation: shimmer 2.5s infinite;
  }

  .animate-pulse-subtle {
    animation: pulse-subtle 2.5s ease-in-out infinite;
  }

  .animate-glow {
    animation: glowPulse 2s ease-in-out infinite;
  }
}

/* ===========================================
   Text Effects
   =========================================== */
@layer utilities {
  .text-glow {
    text-shadow: 0 0 30px rgba(79, 70, 229, 0.5);
  }

  .text-glow-sm {
    text-shadow: 0 0 15px rgba(79, 70, 229, 0.4);
  }

  .text-glow-orange {
    text-shadow: 0 0 30px rgba(249, 115, 22, 0.5);
  }

  .text-gradient {
    background: linear-gradient(135deg, #818CF8 0%, #4F46E5 50%, #F97316 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .text-gradient-subtle {
    background: linear-gradient(135deg, #F8FAFC 0%, #94A3B8 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
}

/* ===========================================
   Interactive States
   =========================================== */
/* All clickable elements get pointer cursor */
button,
[role="button"],
.cursor-pointer,
a {
  cursor: pointer;
}

/* Prevent text selection on interactive elements */
button,
[role="button"],
.no-select {
  user-select: none;
  -webkit-user-select: none;
}

/* Focus Visible */
:focus-visible {
  outline: 2px solid hsl(var(--ring));
  outline-offset: 2px;
}

/* Pro Max Utilities */
@layer utilities {
  /* Pro Max Shadows */
  .shadow-premium {
    box-shadow: 
      0 10px 15px -3px rgba(0, 0, 0, 0.05), 
      0 4px 6px -4px rgba(0, 0, 0, 0.05),
      0 25px 50px -12px rgba(148, 163, 184, 0.15);
  }

  .shadow-soft {
    box-shadow: 
      0 2px 4px 0 rgba(0, 0, 0, 0.03),
      0 10px 20px 0 rgba(0, 0, 0, 0.03);
  }

  .shadow-indigo-glow {
    box-shadow: 0 0 25px -5px rgba(79, 70, 229, 0.3);
  }

  /* Glass Effects */
  .glass-premium {
    @apply backdrop-blur-3xl;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.7) 0%,
      rgba(255, 255, 255, 0.3) 100%
    );
    border: 1px solid rgba(255, 255, 255, 0.4);
  }
}

/* ===========================================
   Data Visualization - Error Rate Colors
   =========================================== */
@layer utilities {
  /* 0% - Perfect */
  .rate-perfect {
    --rate-bg: rgba(34, 197, 94, 0.12);
    --rate-border: rgba(34, 197, 94, 0.35);
    --rate-text: #4ADE80;
  }

  /* 1-20% - Good */
  .rate-good {
    --rate-bg: rgba(74, 222, 128, 0.08);
    --rate-border: rgba(74, 222, 128, 0.25);
    --rate-text: #86EFAC;
  }

  /* 21-50% - Warning */
  .rate-warning {
    --rate-bg: rgba(250, 204, 21, 0.1);
    --rate-border: rgba(250, 204, 21, 0.3);
    --rate-text: #FDE047;
  }

  /* 51-70% - Caution */
  .rate-caution {
    --rate-bg: rgba(251, 146, 60, 0.12);
    --rate-border: rgba(251, 146, 60, 0.35);
    --rate-text: #FB923C;
  }

  /* 71-100% - Critical */
  .rate-critical {
    --rate-bg: rgba(239, 68, 68, 0.15);
    --rate-border: rgba(239, 68, 68, 0.4);
    --rate-text: #F87171;
  }
}

/* ===========================================
   Responsive Adjustments
   =========================================== */
@media (max-width: 768px) {
  .glass-panel {
    backdrop-filter: blur(12px);
  }

  body {
    font-size: 14px;
  }
}

/* ===========================================
   Print Styles
   =========================================== */
@media print {
  body {
    background: white !important;
    color: black !important;
  }

  .glass-panel,
  .glass-card {
    background: white !important;
    border: 1px solid #e2e8f0 !important;
    box-shadow: none !important;
  }
}
